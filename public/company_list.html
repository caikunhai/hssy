<!DOCTYPE html>
<html>
<head>
	<meta charset="UTF-8">
	<title>管理平台</title>
	<link rel="stylesheet" type="text/css" href="css/css.css" />
	<link rel="stylesheet" type="text/css" href="js/themes/default/easyui.css" />
	<link rel="stylesheet" type="text/css" href="css/icon.css">
	<script type="text/javascript" src="js/jquery-1.9.1.min.js"></script>
	<script type="text/javascript" src="js/jquery.easyui.min.js"></script>
    <script type="text/javascript" src="js/core.js"></script>
    <script type="text/javascript" src="js/bns.js"></script>
    <script type="text/javascript" src="js/area.js"></script>
    <script type="text/javascript" src="js/util.date.js"></script>
</head>
<body>
	<table style="width:100%" id="dg" data-options="
                rownumbers:true,
                singleSelect:true,
                autoRowHeight:false,
                pagination:true,
                pageSize:10">
		<thead>
			<tr>
				<th field="city" width="100">所属城市</th>
				<th field="name" width="150">机构名称</th>
				<th field="frMobile" width="100">法人电话</th>
				<th field="ywMobile" width="100">业务电话</th>
				<th field="history" width="80">历史订单</th>
				<th field="rank" width="100">机构类型</th>
				<th field="operation" width="150">操作</th>
			</tr>
		</thead>
	</table>
	
<script>
	var rows = [];
	$(function(){
		bns.company_list(list_html);
	});
	
	//公司列表数据
	function list_html(data){
		var xhrObj = JSON.parse(data);
		for(var i=0;i<xhrObj.length;i++){
			rows.push({
				city: xhrObj[i].city,
				name:xhrObj[i].name,
				frMobile:xhrObj[i].frMobile,
				ywMobile:xhrObj[i].ywMobile,
				num:xhrObj[i].num,
				history:xhrObj[i].history,
				rank:xhrObj[i].rank_,
				operation:'<a href="company_edit.html?id='+xhrObj[i].id+'")>机构详情</a>'
	        });
		}
        $('#dg').datagrid({loadFilter:pagerFilter}).datagrid('loadData', rows);
	}
</script>
</body>
</html>